<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> a blog by victor powell</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="/css/main.css?v1">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
  </head>
  <body>
    <div class="container"><br><a href="/">back</a><div style="float:right">
  <a href="https://twitter.com/vicapow" class="twitter-follow-button" data-show-count="false">Follow @vicapow</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>
      <div class="post-body"><h2><a href="/posts/responsive-d3.html">Responsive D3</a></h2>
<p>May 15, 2013</p>
<iframe class="matchmysize" src="/experiments/responsive-d3.html"></iframe>

<ul>
<li><strong>note:</strong> Resize the page to see the effect</li>
</ul>
<h3>So what techniques make this possible?</h3>
<h4>1. don&#39;t use svg!</h4>
<p>  I know this seems to goes against idiomatic d3 but remember that d3 is</p>
<blockquote>
<p>...not a monolithic framework that seeks to provide every conceivable feature. Instead, D3 solves the crux of the problem: efficient manipulation of documents based on data. </p>
</blockquote>
<p>  And that&#39;s exactly what we&#39;re doing here except with non-svg DOM elements because of the lack of support for percentage based positioning of svg elements. (if you&#39;ve found a better technique, please let me know!) </p>
<p>  <strong>update</strong>: After writing this blog post, I found an example that does achieve a similar effect with svg elements using the the <code>preserveAspectRatio=&quot;none&quot;</code> <code>&lt;svg&gt;</code> property in combination with <code>vector-effect: non-scaling-stroke</code> on <code>&lt;path&gt;</code> elements</p>
<h4>2. use container divs</h4>
<p>  A common pattern that I often see is trying to center align relative to a percentage distance from a parent element. for these cases, you can use an extra wrapper or container div</p>
<pre><code class="lang-css">.label-container{
  width: 1px;
  height: 1px;
  position: absolute;
  left: 50%;
}
.label-container .label{
  width: 100px;
  position: absolute;
  left: -50px; /* half of the width */
  text-align: center;
}</code></pre>
<h4>3. Use &#39;em&#39; not &#39;px&#39; !</h4>
<p>  This will allow text elements to resize automatically when the font-size of their parent element changes. Then, when the window resizes, you can update the font size of the parent element like so:</p>
<pre><code class="lang-js">  window.onresize = function(){
    var graph = document.getElementsByClassName(&#39;graph&#39;)[0]
    graph.style.fontSize = (graph.offsetWidth / 75) + &#39;px&#39;
  }</code></pre>

        <div class="clear"></div>
      </div><br>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        /* CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE */
        var disqus_shortname = 'vicapow'; // required: replace example with your forum shortname
        /* DON'T EDIT BELOW THIS LINE */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments</noscript><a href="/">back</a>
    </div>
    <!-- - apply code highlighting-->
    <script src="/js/main.js?v1"></script><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39250901-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>